$(document).ready(function(){function e(){t(),n={beforeGame:!0,whileGame:!1,afterGame:!1},c={id:"one",maxCoins:6,direction:"up",moves:20,currentCoins:0,row:[],coins:[]},r={},$("#menu p").text(c.moves),$(".field").addClass("nope").removeClass("choice"),console.clear(),d(n)}var o=function(e,o){var n=[];for(i=0;i<e.length;i++)for(n[i]=0,j=0;j<e.length;j++)e[i]==e[j]&&n[i]++;return void 0!=o?n[o]:void 0};$("#reset").click(function(){e()});var n,r,c,l=function(e,o){if($condition=!0,1==n.whileGame&&($condition=!1),r.parent.hasClass("nope")||($condition=!1),o.currentCoins===o.maxCoins&&($condition=!1,n.beforeGame=!1,n.whileGame=!0,d(n)),-1!=$.inArray(r.row,o.row)&&0==n.whileGame&&($condition=!1,console.log("One Coin in the row")),$condition===!0){o.currentCoins++,o.row.push(r.row),o.coins[r.row]=r.field,o.moves-=r.field,$("#menu p").text(o.moves+" / 20");var i="#row-"+r.row;$(i).addClass("used");var c=60-10*o.currentCoins,l=6-o.currentCoins-1,a=o.moves-l;$(".nope").removeClass("nope"),$(".row").each(function(e){var n=e+1;-1!=$.inArray(n,o.row)||$(".row:nth-child("+n+") .field:lt("+a+")").addClass("nope")});var t=document.createElement("div");t.setAttribute("class","coin "+o.id),t.player=o.id,r.parent.append(t)}},a=function(e){return r.parent=e,r.row=parseFloat(e.parent().index()+1),r.field=parseFloat(e.index()+1),1==n.whileGame,r},t=function(){$(".coin").remove(),$(".row").removeClass("used")},s=function(e){console.log(e);var o=r.field+e,n=r.field-e;console.log(o,n),10>=o&&($(".row:nth-child("+r.row+") .field:nth-child("+o+")").addClass("choice"),console.log("minus Choice: "+o)),n>0&&($(".row:nth-child("+r.row+") .field:nth-child("+n+")").addClass("choice"),console.log("minus Choice: "+n)),$(".field.choice").click(function(){})},d=function(e){$(".field.nope").click(function(){if(1==e.beforeGame&&0==e.whileGame&&(console.log("beforeGame"),l(a($(this)),c)),1==e.whileGame){console.log("whileGame"),a($(this));var n=o(c.coins,r.field);s(n)}else console.log("dount")})};window.onload=e});